{"version":3,"sources":["store/context/Division.jsx","store/reducers/Division.jsx","pages/Division/Styles.js","pages/Division/DataTable.js","pages/Division/PageContainer.js","pages/DivisionPage.js"],"names":["DivisionContext","createContext","obj","DivisionReducer","state","action","type","currentField","userInfo","authStr","token","idToken","console","log","login_method","email","csrfToken","loginFields","fieldName","value","isValid","verifyEmail","length","process","REACT_APP_CUSTOM_NODE_ENV","window","sessionStorage","setItem","JSON","stringify","error","isLoggingIn","hasRole","clear","location","href","Button","styled","MuiButton","spacing","Breadcrumbs","MuiBreadcrumbs","Card","MuiCard","Divider","MuiCardContent","props","theme","palette","grey","MuiCardMedia","MuiDivider","Typography","MuiTypography","Paper","MuiChip","rgbcolor","common","white","MuiAvatarGroup","MuiPaper","AddButtonContainer","Grid","DataTable","divisionState","useContext","divisions","mb","Table","TableHead","TableRow","TableCell","TableBody","map","row","key","id","component","scope","name","description","variant","color","size","target","NavLink","React","forwardRef","ref","innerRef","PageContainer","Fragment","title","gutterBottom","aria-label","mt","Link","exact","to","project_name","my","container","item","lg","alignItems","md","justify","DivisionPage","useReducer","dispatch","Division","Provider"],"mappings":"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","file":"static/js/56.23ac0f60.chunk.js","sourcesContent":["import { createContext } from 'react';\n\nconst DivisionContext = createContext([{}, obj => obj]);\n\nexport default DivisionContext;\n","import { verifyEmail } from '../../utility/';\n\nconst DivisionReducer = (state, action) => {\n    const { type } = action;\n    let currentField = [];\n    let currentValue = '';\n    let userInfo = [];\n\n    switch (action.type){\n        case 'SET_USER_STATE':\n            \n            return{\n                ...state,\n                authStr:  `Bearer ${action.token}`,\n                idToken: action.token,\n            }\n        case 'CHECK_STATE': \n            console.log(state);\n            return{\n                ...state\n            }\n        case 'SET_LOGIN_BY_EMAIL':\n            return{\n                ...state,\n                login_method: 'basic',\n                email: action.email\n            }    \n        case 'INITIAL_CSRF_TOKEN':\n\n            // console.log(action.csrfToken);\n            return{\n                ...state,\n                csrfToken: action.csrfToken\n            }\n        case 'LOGIN_FIELD_CHECK':\n            currentField = state.loginFields[action.fieldName];\n            currentField['value'] = action.value;\n            let isValid = false;\n\n            // \n            switch (currentField['validation']){\n                case 'email':\n                    isValid = verifyEmail(currentField['value']);\n                    currentField['isValid'] = isValid;\n                break;\n                case 'password':\n                    isValid = currentField['value'].length > 5;\n                    currentField['isValid'] = isValid;\n                break;\n                default:\n                    currentField['isValid'] = isValid;\n            }\n\n            console.log(currentField);\n\n            return{\n                ...state,\n                loginFields: {\n                    ...state.loginFields,\n                    [action.fieldName]: currentField\n                }\n            }\n        case 'SUCCESS_LOGIN': \n            \n            if (process.env.REACT_APP_CUSTOM_NODE_ENV === 'development' ||\n                process.env.REACT_APP_CUSTOM_NODE_ENV === 'staging') {\n                window.sessionStorage.setItem('user', JSON.stringify(state));\n            }\n            // console.log(window.sessionStorage);\n            return{\n                ...state,\n                error: null,\n                isLoggingIn: true,\n                hasRole: true\n            }\n        case 'LOGOUT': \n            if (process.env.REACT_APP_CUSTOM_NODE_ENV === 'development' ||\n                process.env.REACT_APP_CUSTOM_NODE_ENV === 'staging') {\n                window.sessionStorage.clear();\n                window.location.href = '/login';\n            }\n        \n            window.location.href = '/';\n        break;\n        case 'INITIAL_USER_INFO': \n            userInfo = action.userInfo;\n            console.log(userInfo[0]);\n\n            window.location.href = '/projects';\n            //company: \"Buildking\"\n            // email: \"steve.hui@buildking.hk\"\n            // first_name: \"Steve Hui\"\n            // id: 7\n            // last_name: \"\"\n            // user_title: \"Site Agent\"\n            // username: \"Steve Hui\"\n            return{\n                ...state,\n                userInfo: userInfo\n            }\n        break;\n        default: \n            console.log(\"error\");\n            \n        return{\n            ...state\n        };   \n    }\n}\n\nexport default DivisionReducer;","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { spacing } from \"@material-ui/system\";\r\n\r\nimport {\r\n  Avatar,\r\n  Grid,\r\n  Breadcrumbs as MuiBreadcrumbs,\r\n  Card as MuiCard,\r\n  CardContent as MuiCardContent,\r\n  CardMedia as MuiCardMedia,\r\n  Chip as MuiChip,\r\n  Divider as MuiDivider,\r\n  Typography as MuiTypography,\r\n  Paper as MuiPaper,\r\n  Button as MuiButton\r\n} from \"@material-ui/core\";\r\nimport { AvatarGroup as MuiAvatarGroup } from '@material-ui/lab';\r\nexport const Button = styled(MuiButton)(spacing);\r\n\r\nexport const Breadcrumbs = styled(MuiBreadcrumbs)(spacing);\r\n\r\nexport const Card = styled(MuiCard)(spacing);\r\n\r\nexport const CardContent = styled(MuiCardContent)`\r\n  border-bottom: 1px solid ${props => props.theme.palette.grey[300]};\r\n`;\r\n\r\nexport const CardMedia = styled(MuiCardMedia)`\r\n  height: 220px;\r\n`;\r\n\r\nexport const Divider = styled(MuiDivider)(spacing);\r\n\r\nexport const Typography = styled(MuiTypography)(spacing);\r\n\r\nexport const Chip = styled(MuiChip)`\r\n  height: 20px;\r\n  padding: 4px 0;\r\n  font-size: 85%;\r\n  background-color: ${props => props.rgbcolor};\r\n  color: ${props => props.theme.palette.common.white};\r\n  margin-bottom: ${props => props.theme.spacing(4)}px;\r\n`;\r\n\r\nexport const AvatarGroup = styled(MuiAvatarGroup)`\r\n  margin-left: ${props => props.theme.spacing(2)}px;\r\n`\r\n\r\n// const CardContent = styled(MuiCardContent)(spacing);\r\n\r\nexport const Paper = styled(MuiPaper)(spacing);\r\n\r\nexport const AddButtonContainer = styled(Grid)`\r\n  padding-bottom: 20px;\r\n`;","import React, { useContext } from 'react';\nimport DivisionContext from '../../store/context/Division';\nimport {\n    Grid, Link, Table,\n    TableBody, TableCell, TableHead, TableRow\n  } from \"@material-ui/core\";\nimport { Card, Typography, Paper, Button, Divider, Breadcrumbs } from './Styles';\n\nconst DataTable = () => {\n    const division = useContext(DivisionContext);\n    const divisionState = division.state;\n\n    console.log(divisionState.divisions);\n\n    // \"id\": 7,\n    //       \"name\": \"ND201801_operation\",\n    //       \"title\": \"Operation\",\n    //       \"description\": \"\",\n    //       \"project_id\": 1,\n    //       \"deleted\": 0,\n    //       \"project_name\": \"ND/2018/01\"\n\n    return (\n        <Card mb={6}>\n          <Paper>\n            <Table>\n              <TableHead>\n                <TableRow>\n                  <TableCell>Id</TableCell>\n                  <TableCell>Name</TableCell>\n                  <TableCell>Description</TableCell>\n                  <TableCell></TableCell>\n                  <TableCell></TableCell>\n                  <TableCell></TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n              {divisionState.divisions.map(row => (\n                <TableRow key={row.id}>\n                  <TableCell component=\"th\" scope=\"row\">\n                    {row.id}\n                  </TableCell>\n                  <TableCell component=\"th\" scope=\"row\">\n                    <b>{row.name}</b>\n                  </TableCell>\n                  <TableCell>{row.description}</TableCell>\n                  <TableCell>\n                    <Button\n                      href={`/admin/divisions/${row.id}/forms`}\n                      variant=\"contained\"\n                      color=\"primary\"\n                      size=\"medium\"\n                      target=\"_self\"\n                    >\n                      Details\n                    </Button>\n                  </TableCell>\n                  <TableCell>\n                    <Button\n                      href={`/admin/division/edit/${row.id}`}\n                      variant=\"contained\"\n                      color=\"secondary\"\n                      size=\"medium\"\n                      target=\"_self\"\n                    >\n                      Edit\n                    </Button>\n                  </TableCell>\n                  <TableCell>\n                    <Button\n                      href={`/admin/division/remove/${row.id}`}\n                      variant=\"contained\"\n                      color=\"secondary\"\n                      size=\"medium\"\n                      target=\"_self\"\n                    >\n                      Remove\n                    </Button>\n                  </TableCell>\n                </TableRow>\n              ))}\n              </TableBody>\n            </Table>\n          </Paper>\n        </Card>\n      );\n}\n \nexport default DataTable;","import React, { useContext } from 'react';\nimport { NavLink as RouterNavLink } from \"react-router-dom\";\nimport Helmet from 'react-helmet';\nimport {Grid, Link} from '@material-ui/core';\nimport DivisionContext from '../../store/context/Division';\nimport { Card, Typography, Paper, Button, Divider, Breadcrumbs, AddButtonContainer } from './Styles';\nimport DataTable from './DataTable';\n\nconst NavLink = React.forwardRef((props, ref) => (\n  <RouterNavLink innerRef={ref} {...props} />\n));\n\nconst PageContainer = () => {\n  const division = useContext(DivisionContext);\n  const divisionState = division.state;\n\n  return ( \n    <React.Fragment>\n      <Helmet title=\"Projects\" />\n      <Typography variant=\"h3\" gutterBottom>\n          Divisions\n      </Typography>\n      <Breadcrumbs aria-label=\"Breadcrumb\" mt={2}>\n          <Link component={NavLink} exact to=\"/admin/projects\">\n              Admin\n          </Link>\n          <Link component={NavLink} exact to=\"/admin/projects\">\n              Projects\n          </Link>\n          <Typography>{divisionState.divisions[0].project_name}</Typography>\n      </Breadcrumbs>\n      <Divider my={6} />\n      <Grid container item lg={12} alignItems=\"center\">\n        <Grid container item lg={6} md={6} >\n          <h2>{divisionState.divisions[0].project_name}</h2>\n        </Grid>\n        <AddButtonContainer container item lg={6} md={6} spacing={2} justify=\"flex-end\">\n          <Button\n            href={`/add/division`}\n            variant=\"contained\"\n            color=\"primary\"\n            size=\"large\"\n            target=\"_self\"\n          >\n            Add New Division\n          </Button>\n        </AddButtonContainer>\n      </Grid>\n      <DataTable />\n    </React.Fragment>\n  );\n}\n \nexport default PageContainer;","import React, { useReducer } from 'react';\nimport { Grid } from \"@material-ui/core\";\nimport UserContext from '../store/context/User';\nimport DivisionContext from '../store/context/Division';\nimport DivisionReducer from '../store/reducers/Division';\nimport PageContainer from './Division/PageContainer';\n\nconst DivisionPage = props => {\n//   console.log(props.id);\nconst initialDivisionState = {\n  divisions: [\n      {\n          \"id\": 7,\n          \"name\": \"ND201801_operation\",\n          \"title\": \"Operation\",\n          \"description\": \"\",\n          \"project_id\": 1,\n          \"deleted\": 0,\n          \"project_name\": \"ND/2018/01\"\n      },\n      {\n          \"id\": 8,\n          \"name\": \"ND201801_survey\",\n          \"title\": \"Survey\",\n          \"description\": \"\",\n          \"project_id\": 1,\n          \"deleted\": 0,\n          \"project_name\": \"ND/2018/01\"\n      },\n      {\n          \"id\": 9,\n          \"name\": \"ND201801_safety\",\n          \"title\": \"Safety\",\n          \"description\": \"\",\n          \"project_id\": 1,\n          \"deleted\": 0,\n          \"project_name\": \"ND/2018/01\"\n      },\n      {\n          \"id\": 10,\n          \"name\": \"ND201801_environment\",\n          \"title\": \"Environment\",\n          \"description\": \"\",\n          \"project_id\": 1,\n          \"deleted\": 0,\n          \"project_name\": \"ND/2018/01\"\n      },\n      {\n          \"id\": 11,\n          \"name\": \"ND201801_quality\",\n          \"title\": \"Quality\",\n          \"description\": \"\",\n          \"project_id\": 1,\n          \"deleted\": 0,\n          \"project_name\": \"ND/2018/01\"\n      }\n  ]\n};\nconst [state, dispatch] = useReducer(DivisionReducer, initialDivisionState);\n\n  return (\n      <DivisionContext.Provider value={{state, dispatch}}>\n          <PageContainer />\n      </DivisionContext.Provider>\n  );\n};\n\nexport default DivisionPage;\n"],"sourceRoot":""}