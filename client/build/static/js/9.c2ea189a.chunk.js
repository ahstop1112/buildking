(this["webpackJsonpcerebro-inspection-cms"]=this["webpackJsonpcerebro-inspection-cms"]||[]).push([[9],{576:function(e,t,a){"use strict";a.d(t,"c",(function(){return c})),a.d(t,"e",(function(){return i})),a.d(t,"a",(function(){return o})),a.d(t,"d",(function(){return l})),a.d(t,"b",(function(){return d}));var n=a(581),r=a.n(n).a.create({baseURL:"https://cmsdemo.ddnsking.com"}),c=function(){return r({method:"POST",url:"/api/cms/table/t_select/",headers:{"Content-Type":"application/json"},data:{tableName:"i_project",columns:["id","name","description","extra"],where:[["deleted","=","0","AND"]],orderBy:[["id","ASC"]]}})},i=function(e){return r({method:"POST",url:"/api/cms/table/t_select/",headers:{"Content-Type":"application/json"},data:{tableName:"i_project",columns:["id","name","description","extra"],where:[["deleted","=","0","AND"],["id","=","".concat(e),"AND"]]}})},o=function(e){return r({method:"POST",url:"/api/cms/table/t_select/",headers:{"Content-Type":"application/json"},data:{tableName:"i_division",columns:["id","name","description","extra","project_id"],where:[["deleted","=","0","AND"],["project_id","=","".concat(e),"AND"]],orderBy:[["id","ASC"]]}})},l=function(e){return r({method:"POST",url:"/api/cms/table/t_select/",headers:{"Content-Type":"application/json"},data:{tableName:"i_division",columns:["id","name","description","title"],where:[["deleted","=","0","AND"],["id","=","".concat(e),"AND"]]}})},d=function(e){return r({method:"POST",url:"/api/cms/table/t_select/",headers:{"Content-Type":"application/json"},data:{tableName:"i_form",columns:["id","no","data","created_time","division_id","state_id"],where:[["deleted","=","0","AND"],["division_id","=","".concat(e),"AND"]],orderBy:[["id","ASC"]]}})}},578:function(e,t,a){"use strict";var n=a(0);Object(n.createContext)([{},function(e){return e}])},640:function(e,t,a){"use strict";a.r(t);var n=a(61),r=a(0),c=a.n(r),i=(a(578),a(27)),o=Object(r.createContext)([{},function(e){return e}]),l=a(88),d=a(90),u=function(e,t){var a=[];switch(t.type){case"INITIAL_PROJECTS":return Object(d.a)(Object(d.a)({},e),{},{projects:t.project_data});case"INITIAL_UPDATE_PROJECT":return Object(d.a)(Object(d.a)({},e),{},{updateProject:{id:t.update_project[0].id,name:t.update_project[0].name,description:t.update_project[0].description,extra:t.update_project[0].extra}});case"CHANGE_TEXTFIELD":return Object(d.a)(Object(d.a)({},e),{},{updateProject:Object(d.a)(Object(d.a)({},e.updateProject),{},Object(l.a)({},t.fieldName,t.fieldValue))});case"LOGOUT":"development"!==Object({NODE_ENV:"production",PUBLIC_URL:"/web/admin",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_CUSTOM_NODE_ENV&&"staging"!==Object({NODE_ENV:"production",PUBLIC_URL:"/web/admin",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_CUSTOM_NODE_ENV||(window.sessionStorage.clear(),window.location.href="/login"),window.location.href="/";break;case"INITIAL_USER_INFO":return a=t.userInfo,console.log(a[0]),window.location.href="/projects",Object(d.a)(Object(d.a)({},e),{},{userInfo:a});default:return console.log("error"),Object(d.a)({},e)}},m=a(79),s=a(123),p=a.n(s),E=a(637),f=a(544),j=a(8),b=a(7),O=a(569),h=a(556),_=a(646),g=a(623),v=a(624),P=a(625),T=a(626),C=a(122),y=a(572),N=a(499),w=a(627);function x(){var e=Object(j.a)(["\n  padding-bottom: 20px;\n"]);return x=function(){return e},e}function A(){var e=Object(j.a)(["\n  width: 100%;\n"]);return A=function(){return e},e}function S(){var e=Object(j.a)(["\n  margin-left: ","px;\n"]);return S=function(){return e},e}function I(){var e=Object(j.a)(["\n  height: 20px;\n  padding: 4px 0;\n  font-size: 85%;\n  background-color: ",";\n  color: ",";\n  margin-bottom: ","px;\n"]);return I=function(){return e},e}function D(){var e=Object(j.a)(["\n  height: 220px;\n"]);return D=function(){return e},e}function R(){var e=Object(j.a)(["\n  border-bottom: 1px solid ",";\n"]);return R=function(){return e},e}function L(){var e=Object(j.a)(["\n  width: 100%;\n"]);return L=function(){return e},e}var k=Object(b.c)(h.a)(O.b),U=Object(b.c)(_.a)(O.b),B=Object(b.c)(g.a)(L()),V=Object(b.c)(v.a)(R(),(function(e){return e.theme.palette.grey[300]})),W=(Object(b.c)(P.a)(D()),Object(b.c)(T.a)(O.b)),z=Object(b.c)(C.a)(O.b),F=(Object(b.c)(y.a)(I(),(function(e){return e.rgbcolor}),(function(e){return e.theme.palette.common.white}),(function(e){return e.theme.spacing(4)})),Object(b.c)(w.a)(S(),(function(e){return e.theme.spacing(2)})),Object(b.c)(N.a)(A())),H=Object(b.c)(f.a)(x()),J=a(576),K=a(628),G=a(629),M=a(630),X=a(631),q=a(632),Q=a(633),Y=a(634),Z=a(635),$=a(636),ee=function(){var e=Object(r.useContext)(o).state,t=Object(r.useState)(!1),a=Object(n.a)(t,2),i=a[0],l=a[1];return c.a.createElement(B,{mb:6},c.a.createElement(F,null,c.a.createElement(K.a,null,c.a.createElement(G.a,null,c.a.createElement(M.a,null,c.a.createElement(X.a,null,"Id"),c.a.createElement(X.a,null,"Name"),c.a.createElement(X.a,null,"Description"),c.a.createElement(X.a,null),c.a.createElement(X.a,null),c.a.createElement(X.a,null))),c.a.createElement(q.a,null,e.projects.map((function(e,t){return c.a.createElement(M.a,{key:e.id},c.a.createElement(X.a,{component:"th",scope:"row"},e.id),c.a.createElement(X.a,{component:"th",scope:"row"},c.a.createElement("b",null,e.name)),c.a.createElement(X.a,null,e.description),c.a.createElement(X.a,null,c.a.createElement(k,{href:"/web/admin/projects/".concat(e.id,"/divisions"),variant:"contained",color:"primary",size:"medium",target:"_self"},"Details")),c.a.createElement(X.a,null,c.a.createElement(k,{href:"/web/admin/projects/edit/".concat(e.id),variant:"contained",color:"secondary",size:"medium",target:"_self"},"Edit")),c.a.createElement(X.a,null,c.a.createElement(k,{onClick:function(){return l(!0)},variant:"contained",color:"secondary",size:"medium",target:"_self"},"Remove")))})))),c.a.createElement(Q.a,{open:i,onClose:function(){return l(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},c.a.createElement(Y.a,null,c.a.createElement(Z.a,{id:"alert-dialog-description"},"Are you confirm to remove this project?")),c.a.createElement($.a,null,c.a.createElement(k,{onClick:function(){return l(!1)},color:"secondary"},"Cancel"),c.a.createElement(k,{variant:"contained",onClick:function(){return l(!1)},color:"primary",autoFocus:!0},"Confirm")))))},te=c.a.forwardRef((function(e,t){return c.a.createElement(m.c,Object.assign({innerRef:t},e))})),ae=function(e){var t=Object(r.useContext)(o);return Object(r.useEffect)((function(){Object(J.c)().then((function(e){if(e.data.data){var a=e.data.data;t.dispatch({type:"INITIAL_PROJECTS",project_data:a})}})).catch((function(e){}))}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement(p.a,{title:"Projects"}),c.a.createElement(z,{variant:"h3",gutterBottom:!0},"Projects"),c.a.createElement(U,{"aria-label":"Breadcrumb",mt:2},c.a.createElement(E.a,{component:te,to:"/web/admin/projects"},"Admin"),c.a.createElement(z,null,"Projects")),c.a.createElement(W,{my:6}),c.a.createElement(H,{container:!0,item:!0,lg:12,md:12,spacing:2,justify:"flex-end"},c.a.createElement(k,{href:"/web/admin/projects/add",variant:"contained",color:"primary",size:"large",target:"_self"},"Add New Project")),c.a.createElement(f.a,{container:!0,item:!0,lg:12,md:12},c.a.createElement(ee,null)))},ne=a(639),re=function(){var e=Object(r.useContext)(o),t=e.state,a=function(a,n){console.log(t),e.dispatch({type:"CHANGE_TEXTFIELD",fieldValue:a,fieldName:n})};return c.a.createElement(B,null,c.a.createElement(V,null,c.a.createElement(F,null,c.a.createElement("form",{noValidate:!0,autoComplete:"off"},c.a.createElement(f.a,{container:!0,item:!0,lg:12},c.a.createElement(f.a,{container:!0,item:!0,lg:6,md:4},c.a.createElement(ne.a,{id:"name",label:"Name",style:{margin:8},value:t.updateProject.name?t.updateProject.name:"",defaultValue:t.updateProject.name,onChange:function(e){return a(e.target.value,"name")},InputLabelProps:{shrink:!0},fullWidth:!0,m:5})),c.a.createElement(f.a,{container:!0,item:!0,lg:6,md:8},c.a.createElement(ne.a,{id:"description",label:"Description",style:{margin:8},value:t.updateProject.description?t.updateProject.description:"",defaultValue:t.updateProject.description,onChange:function(e){return a(e.target.value,"description")},InputLabelProps:{shrink:!0},type:"text",fullWidth:!0,m:5})),c.a.createElement(f.a,{container:!0,item:!0,lg:12},c.a.createElement(ne.a,{id:"extra",label:"Extra",style:{margin:8},defaultValue:t.updateProject.extra,onChange:function(e){return a(e.target.value,"extra")},placeholder:"Extra",multiline:!0,rows:"10",InputLabelProps:{shrink:!0},type:"text",fullWidth:!0,m:2}))),c.a.createElement(f.a,{container:!0,item:!0,lg:12,justify:"flex-end"},c.a.createElement(h.a,{variant:"contained",size:"medium",style:{margin:"25px 8px 0 8px"}},"Reset"),c.a.createElement(h.a,{variant:"contained",color:"primary",size:"medium",style:{margin:"25px 8px 0 8px"},target:"_self"},"Save"))))))},ce=c.a.forwardRef((function(e,t){return c.a.createElement(m.c,Object.assign({innerRef:t},e))})),ie=function(e){var t=e.pageType,a=e.editId,n=Object(r.useContext)(o),i=n.state;return Object(r.useEffect)((function(){t.includes("edit")&&Object(J.e)(a).then((function(e){if(e.data.data){var t=e.data.data;n.dispatch({type:"INITIAL_UPDATE_PROJECT",update_project:t})}})).catch((function(e){}))}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement(p.a,{title:"Projects"}),c.a.createElement(z,{variant:"h3",gutterBottom:!0},"Projects"),c.a.createElement(U,{"aria-label":"Breadcrumb",mt:2},c.a.createElement(E.a,{component:ce,exact:!0,to:"/web/admin/projects"},"Admin"),c.a.createElement(E.a,{component:ce,exact:!0,to:"/web/admin/projects"},"Projects"),t.includes("add")?c.a.createElement(z,null,"Add New Project"):t.includes("edit")?c.a.createElement(z,null,"Edit Project"):null),c.a.createElement(W,{my:6}),c.a.createElement(f.a,{container:!0,item:!0,lg:12,md:12},c.a.createElement(H,{container:!0,item:!0,lg:6,md:6},t.includes("add")?c.a.createElement("h2",null,"Add New Project"):c.a.createElement("h2",null,"Edit Project: ",i.updateProject.name)),c.a.createElement(f.a,{container:!0,item:!0,lg:6,md:6,justify:"flex-end"},c.a.createElement(k,{href:"/web/admin/projects",color:"primary",size:"medium",target:"_self"},"Back"))),c.a.createElement(f.a,{container:!0,item:!0,lg:12,md:12},c.a.createElement(re,{pageType:t,editId:a})))};t.default=function(e){var t=Object(i.f)().pathname,a=t.split("/")[5]?t.split("/")[5]:null,l=Object(r.useReducer)(u,{projects:[],updateProject:{}}),d=Object(n.a)(l,2),m=d[0],s=d[1];return c.a.createElement(o.Provider,{value:{state:m,dispatch:s}},t.includes("add")||t.includes("edit")?c.a.createElement(ie,{pageType:t,editId:a}):c.a.createElement(ae,{pageType:t}))}}}]);
//# sourceMappingURL=9.c2ea189a.chunk.js.map