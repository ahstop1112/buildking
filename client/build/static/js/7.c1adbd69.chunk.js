(this["webpackJsonpcerebro-inspection-cms"]=this["webpackJsonpcerebro-inspection-cms"]||[]).push([[7],{576:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"e",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return d}));var a=n(581),c=n.n(a).a.create({baseURL:"https://cmsdemo.ddnsking.com"}),r=function(){return c({method:"POST",url:"/api/cms/table/t_select/",headers:{"Content-Type":"application/json"},data:{tableName:"i_project",columns:["id","name","description","extra"],where:[["deleted","=","0","AND"]],orderBy:[["id","ASC"]]}})},i=function(e){return c({method:"POST",url:"/api/cms/table/t_select/",headers:{"Content-Type":"application/json"},data:{tableName:"i_project",columns:["id","name","description","extra"],where:[["deleted","=","0","AND"],["id","=","".concat(e),"AND"]]}})},o=function(e){return c({method:"POST",url:"/api/cms/table/t_select/",headers:{"Content-Type":"application/json"},data:{tableName:"i_division",columns:["id","name","description","extra","project_id"],where:[["deleted","=","0","AND"],["project_id","=","".concat(e),"AND"]],orderBy:[["id","ASC"]]}})},l=function(e){return c({method:"POST",url:"/api/cms/table/t_select/",headers:{"Content-Type":"application/json"},data:{tableName:"i_division",columns:["id","name","description","title"],where:[["deleted","=","0","AND"],["id","=","".concat(e),"AND"]]}})},d=function(e){return c({method:"POST",url:"/api/cms/table/t_select/",headers:{"Content-Type":"application/json"},data:{tableName:"i_form",columns:["id","no","data","created_time","division_id","state_id"],where:[["deleted","=","0","AND"],["division_id","=","".concat(e),"AND"]],orderBy:[["id","ASC"]]}})}},577:function(e,t,n){"use strict";var a=n(0),c=Object(a.createContext)([{},function(e){return e}]);t.a=c},578:function(e,t,n){"use strict";var a=n(0);Object(a.createContext)([{},function(e){return e}])},645:function(e,t,n){"use strict";n.r(t);var a=n(61),c=n(0),r=n.n(c),i=n(27),o=(n(578),Object(c.createContext)([{},function(e){return e}])),l=n(88),d=n(90),u=function(e,t){switch(t.type){case"INITIAL_FORMS":return Object(d.a)(Object(d.a)({},e),{},{forms:t.forms_data.length>0?t.forms_data:[]});case"INITIAL_UPDATE_DIVISION":return Object(d.a)(Object(d.a)({},e),{},{updateDivision:{id:t.division_data[0].id,name:t.division_data[0].name,description:t.division_data[0].description,title:t.division_data[0].title}});case"CHANGE_NEW_TEXTFIELD":case"CHANGE_UPDATE_TEXTFIELD":return Object(d.a)(Object(d.a)({},e),{},{updateDivision:Object(d.a)(Object(d.a)({},e.updateProject),{},Object(l.a)({},t.fieldName,t.fieldValue))});case"INITIAL_PROJECT_NAME":return Object(d.a)(Object(d.a)({},e),{},{projectName:t.projectName});case"INITIAL_DIVISION_NAME":return Object(d.a)(Object(d.a)({},e),{},{divisionName:t.divisionName});default:return console.log("error"),Object(d.a)({},e)}},m=n(79),s=n(123),p=n.n(s),f=n(637),b=n(544),E=n(576),j=n(8),h=n(7),O=n(569),v=n(556),g=n(646),_=n(623),N=n(624),I=n(625),A=n(626),T=n(122),x=n(572),y=n(499),w=n(641),D=n(638),C=n(627);function P(){var e=Object(j.a)(["\n  background-color: #f7f7f7;\n\n  .MuiBox-root: {\n    padding: '1em 2em';\n  }\n"]);return P=function(){return e},e}function R(){var e=Object(j.a)(["\n  color: #25616C;\n  text-align: 'left';\n"]);return R=function(){return e},e}function S(){var e=Object(j.a)(["\n  box-shadow: none;\n  /* border: 1px solid red; */\n  background-color: #fff;\n  margin-left: 15px;\n  margin-right: 15px;\n  \n  .MuiTabs-indicator: {\n    background-color: #25616C;\n  }\n"]);return S=function(){return e},e}function k(){var e=Object(j.a)(["\n  margin-top: 2em;\n  box-shadow: none;\n  background: none;\n  \n  .MuiTabs-indicator: {\n    background-color: #25616C;\n  }\n"]);return k=function(){return e},e}function L(){var e=Object(j.a)(["\n  margin: 0;\n"]);return L=function(){return e},e}function F(){var e=Object(j.a)(["\n"]);return F=function(){return e},e}function M(){var e=Object(j.a)(["\n  margin-left: ","px;\n"]);return M=function(){return e},e}function B(){var e=Object(j.a)(["\n  height: 20px;\n  padding: 4px 0;\n  font-size: 85%;\n  background-color: ",";\n  color: ",";\n  margin-bottom: ","px;\n"]);return B=function(){return e},e}function z(){var e=Object(j.a)(["\n  height: 220px;\n"]);return z=function(){return e},e}function J(){var e=Object(j.a)(["\n  border-bottom: 1px solid ",";\n"]);return J=function(){return e},e}var V=Object(h.c)(v.a)(O.b),U=Object(h.c)(g.a)(O.b),G=Object(h.c)(_.a)(O.b),H=(Object(h.c)(N.a)(J(),(function(e){return e.theme.palette.grey[300]})),Object(h.c)(I.a)(z()),Object(h.c)(A.a)(O.b)),X=Object(h.c)(T.a)(O.b),W=(Object(h.c)(x.a)(B(),(function(e){return e.rgbcolor}),(function(e){return e.theme.palette.common.white}),(function(e){return e.theme.spacing(4)})),Object(h.c)(C.a)(M(),(function(e){return e.theme.spacing(2)})),Object(h.c)(y.a)(O.b)),q=Object(h.c)(b.a)(F()),K=h.c.h2(L()),Q=Object(h.c)(W)(k()),Y=Object(h.c)(w.a)(S()),Z=Object(h.c)(D.a)(R()),$=h.c.div(P()),ee=n(187),te=n(563),ne=n(628),ae=n(629),ce=n(630),re=n(631),ie=n(632),oe=function(e){var t=e.children,n=e.value,a=e.index,c=Object(ee.a)(e,["children","value","index"]);return r.a.createElement($,Object.assign({role:"tabpanel",hidden:n!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a)},c),n===a&&r.a.createElement(te.a,{p:3},t))},le=function(){var e=Object(c.useContext)(o).state,t=Object(c.useState)(0),n=Object(a.a)(t,2),i=n[0],l=n[1],d=e.forms,u=d.filter((function(e){return 1===e.state_id})),m=d.filter((function(e){return 2===e.state_id})),s=d.filter((function(e){return 3===e.state_id})),p=d.filter((function(e){return 4===e.state_id}));console.log(e);var f=function(e){return r.a.createElement(G,{mb:6},r.a.createElement(W,null,r.a.createElement(ne.a,null,r.a.createElement(ae.a,null,r.a.createElement(ce.a,null,r.a.createElement(re.a,null,"#"),r.a.createElement(re.a,null,"Id"),r.a.createElement(re.a,null,"No"),r.a.createElement(re.a,null,"Created Time"),r.a.createElement(re.a,null),r.a.createElement(re.a,null))),r.a.createElement(ie.a,null,e.map((function(e,t){return r.a.createElement(ce.a,{key:e.id},r.a.createElement(re.a,{component:"th",scope:"row"},t+1),r.a.createElement(re.a,{component:"th",scope:"row"},e.id),r.a.createElement(re.a,{component:"th",scope:"row"},r.a.createElement("b",null,e.no)),r.a.createElement(re.a,null,e.created_time),r.a.createElement(re.a,null,r.a.createElement(V,{href:"https://cerebro.servehttp.com/formlist/html/genReport.php?form_id=".concat(e.id),variant:"contained",color:"primary",size:"medium",target:"_blank"},"Preview")),r.a.createElement(re.a,null,r.a.createElement(V,{href:"/admin/form/remove/".concat(e.id),variant:"contained",color:"secondary",size:"medium",target:"_self"},"Remove")))}))))))};return r.a.createElement(Q,null,r.a.createElement(Y,{value:i,onChange:function(e,t){l(t)}},r.a.createElement(Z,{label:"Pending (".concat(u.length,")")}),r.a.createElement(Z,{label:"Completed (".concat(m.length,")")}),r.a.createElement(Z,{label:"Rejected (".concat(s.length,")")}),r.a.createElement(Z,{label:"Follow up (".concat(p.length,")")})),r.a.createElement(oe,{value:i,index:0},u.length>0&&f(u)),r.a.createElement(oe,{value:i,index:1},m.length>0&&f(m)),r.a.createElement(oe,{value:i,index:2},s.length>0&&f(s)),r.a.createElement(oe,{value:i,index:3},p.length>0&&f(p)))},de=r.a.forwardRef((function(e,t){return r.a.createElement(m.c,Object.assign({innerRef:t},e))})),ue=function(e){var t=Object(c.useContext)(o),n=t.state,a=e.pageType,i=a.split("/")[4]?a.split("/")[4]:null,l=a.split("/")[6]?a.split("/")[6]:null;return Object(c.useEffect)((function(){Object(E.e)(i).then((function(e){if(e.data.data){var n=e.data.data[0].name;t.dispatch({type:"INITIAL_PROJECT_NAME",projectName:n})}})).catch((function(e){})),Object(E.d)(l).then((function(e){if(e.data.data){var n=e.data.data[0].name;t.dispatch({type:"INITIAL_DIVISION_NAME",divisionName:n})}})).catch((function(e){})),Object(E.b)(l).then((function(e){if(e.data.data){var n=e.data.data;t.dispatch({type:"INITIAL_FORMS",forms_data:n})}})).catch((function(e){}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{title:"Forms"}),r.a.createElement(X,{variant:"h3",gutterBottom:!0},"Forms"),r.a.createElement(U,{"aria-label":"Breadcrumb",mt:2},r.a.createElement(f.a,{component:de,to:"/web/admin/projects"},"Admin"),r.a.createElement(f.a,{component:de,to:"/web/admin/projects"},"Projects"),r.a.createElement(f.a,{component:de,to:"/web/admin/projects/".concat(i,"/divisions")},n.projectName),r.a.createElement(X,null,n.divisionName)),r.a.createElement(H,{my:6}),r.a.createElement(b.a,{container:!0,item:!0,lg:12,alignItems:"center"},r.a.createElement(b.a,{container:!0,item:!0,lg:6,md:6},r.a.createElement(K,null,n.divisionName)),r.a.createElement(q,{container:!0,item:!0,alignItems:"center",lg:6,md:6,justify:"flex-end"},r.a.createElement(V,{href:"/form/add",variant:"contained",color:"primary",size:"large",target:"_self"},"Add New Form"))),n.forms.length>0&&r.a.createElement(le,{divisionId:l}),0===n.forms.length&&r.a.createElement("h2",null,"No Record!"))},me=n(577),se=r.a.forwardRef((function(e,t){return r.a.createElement(m.c,Object.assign({innerRef:t},e))})),pe=function(e){var t=e.pageType,n=(e.editId,Object(c.useContext)(me.a)),a=n.state,i=t.split("/")[4]?t.split("/")[4]:null,o=t.split("/")[7]?t.split("/")[7]:null;return console.log(o),Object(c.useEffect)((function(){Object(E.e)(i).then((function(e){if(e.data.data){var t=e.data.data[0].name;console.log(t),n.dispatch({type:"INITIAL_PROJECT_NAME",projectName:t})}})),t.includes("edit")&&Object(E.d)(o).then((function(e){if(console.log(e),e.data.data){var t=e.data.data;n.dispatch({type:"INITIAL_UPDATE_DIVISION",division_data:t})}})).catch((function(e){}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{title:"Divisions"}),r.a.createElement(X,{variant:"h3",gutterBottom:!0},"Divisions"),r.a.createElement(U,{"aria-label":"Breadcrumb",mt:2},r.a.createElement(f.a,{component:se,exact:!0,to:"/web/admin/projects"},"Admin"),r.a.createElement(f.a,{component:se,exact:!0,to:"/web/admin/projects"},"Projects"),r.a.createElement(f.a,{component:se,exact:!0,to:"/web/admin/projects/".concat(i,"/divisions")},a.projectName),t.includes("add")?r.a.createElement(X,null,"Add New Division"):t.includes("edit")?r.a.createElement(X,null,"Edit Division"):null),r.a.createElement(H,{my:6}),r.a.createElement(b.a,{container:!0,item:!0,lg:12,md:12},r.a.createElement(q,{container:!0,item:!0,lg:6,md:6},t.includes("add")?r.a.createElement("h2",null,"Add New Division"):r.a.createElement("h2",null,"Edit Division : ",a.updateDivision.name)),r.a.createElement(b.a,{container:!0,item:!0,lg:6,md:6,justify:"flex-end"},r.a.createElement(V,{href:"/web/admin/projects/".concat(i,"/divisions"),color:"primary",size:"medium",target:"_self"},"Back"))),r.a.createElement(b.a,{container:!0,item:!0,lg:12,md:12}))};t.default=function(e){var t=Object(i.f)().pathname,n=t.split("/")[5]?t.split("/")[5]:null,l=Object(c.useReducer)(u,{division:[],forms:[]}),d=Object(a.a)(l,2),m=d[0],s=d[1];return r.a.createElement(o.Provider,{value:{state:m,dispatch:s}},t.includes("add")||t.includes("edit")?r.a.createElement(pe,{pageType:t,editId:n}):r.a.createElement(ue,{pageType:t}))}}}]);
//# sourceMappingURL=7.c1adbd69.chunk.js.map