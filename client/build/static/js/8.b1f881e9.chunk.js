(this["webpackJsonpcerebro-inspection-cms"]=this["webpackJsonpcerebro-inspection-cms"]||[]).push([[8],{576:function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"e",(function(){return c})),a.d(t,"a",(function(){return o})),a.d(t,"d",(function(){return l})),a.d(t,"b",(function(){return d}));var n=a(581),i=a.n(n).a.create({baseURL:"https://cmsdemo.ddnsking.com"}),r=function(){return i({method:"POST",url:"/api/cms/table/t_select/",headers:{"Content-Type":"application/json"},data:{tableName:"i_project",columns:["id","name","description","extra"],where:[["deleted","=","0","AND"]],orderBy:[["id","ASC"]]}})},c=function(e){return i({method:"POST",url:"/api/cms/table/t_select/",headers:{"Content-Type":"application/json"},data:{tableName:"i_project",columns:["id","name","description","extra"],where:[["deleted","=","0","AND"],["id","=","".concat(e),"AND"]]}})},o=function(e){return i({method:"POST",url:"/api/cms/table/t_select/",headers:{"Content-Type":"application/json"},data:{tableName:"i_division",columns:["id","name","description","extra","project_id"],where:[["deleted","=","0","AND"],["project_id","=","".concat(e),"AND"]],orderBy:[["id","ASC"]]}})},l=function(e){return i({method:"POST",url:"/api/cms/table/t_select/",headers:{"Content-Type":"application/json"},data:{tableName:"i_division",columns:["id","name","description","title"],where:[["deleted","=","0","AND"],["id","=","".concat(e),"AND"]]}})},d=function(e){return i({method:"POST",url:"/api/cms/table/t_select/",headers:{"Content-Type":"application/json"},data:{tableName:"i_form",columns:["id","no","data","created_time","division_id","state_id"],where:[["deleted","=","0","AND"],["division_id","=","".concat(e),"AND"]],orderBy:[["id","ASC"]]}})}},577:function(e,t,a){"use strict";var n=a(0),i=Object(n.createContext)([{},function(e){return e}]);t.a=i},644:function(e,t,a){"use strict";a.r(t);var n=a(61),i=a(0),r=a.n(i),c=a(27),o=a(577),l=a(88),d=a(90),s=function(e,t){var a=[];switch(t.type){case"INITIAL_DIVISIONS":return Object(d.a)(Object(d.a)({},e),{},{divisions:t.divisions_data});case"INITIAL_UPDATE_DIVISION":return Object(d.a)(Object(d.a)({},e),{},{updateDivision:{id:t.division_data[0].id,name:t.division_data[0].name,description:t.division_data[0].description,title:t.division_data[0].title}});case"CHANGE_NEW_TEXTFIELD":case"CHANGE_UPDATE_TEXTFIELD":return Object(d.a)(Object(d.a)({},e),{},{updateDivision:Object(d.a)(Object(d.a)({},e.updateProject),{},Object(l.a)({},t.fieldName,t.fieldValue))});case"INITIAL_PROJECT_NAME":return console.log(t.projectName),Object(d.a)(Object(d.a)({},e),{},{projectName:t.projectName});case"SUCCESS_LOGIN":return"development"!==Object({NODE_ENV:"production",PUBLIC_URL:"/web/admin",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_CUSTOM_NODE_ENV&&"staging"!==Object({NODE_ENV:"production",PUBLIC_URL:"/web/admin",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_CUSTOM_NODE_ENV||window.sessionStorage.setItem("user",JSON.stringify(e)),Object(d.a)(Object(d.a)({},e),{},{error:null,isLoggingIn:!0,hasRole:!0});case"LOGOUT":"development"!==Object({NODE_ENV:"production",PUBLIC_URL:"/web/admin",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_CUSTOM_NODE_ENV&&"staging"!==Object({NODE_ENV:"production",PUBLIC_URL:"/web/admin",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_CUSTOM_NODE_ENV||(window.sessionStorage.clear(),window.location.href="/login"),window.location.href="/";break;case"INITIAL_USER_INFO":return a=t.userInfo,console.log(a[0]),window.location.href="/projects",Object(d.a)(Object(d.a)({},e),{},{userInfo:a});default:return console.log("error"),Object(d.a)({},e)}},u=a(79),m=a(123),p=a.n(m),E=a(637),f=a(544),b=a(576),O=a(8),v=a(7),_=a(569),j=a(556),g=a(646),h=a(623),T=a(624),N=a(625),D=a(626),I=a(122),C=a(572),S=a(499),A=a(627);function y(){var e=Object(O.a)(["\n  margin: 0;\n"]);return y=function(){return e},e}function w(){var e=Object(O.a)(["\n  padding-left: 10px;\n  padding-bottom: 20px;\n"]);return w=function(){return e},e}function P(){var e=Object(O.a)(["\n  width: 100%;\n"]);return P=function(){return e},e}function x(){var e=Object(O.a)(["\n  margin-left: ","px;\n"]);return x=function(){return e},e}function L(){var e=Object(O.a)(["\n  height: 20px;\n  padding: 4px 0;\n  font-size: 85%;\n  background-color: ",";\n  color: ",";\n  margin-bottom: ","px;\n"]);return L=function(){return e},e}function R(){var e=Object(O.a)(["\n  height: 220px;\n"]);return R=function(){return e},e}function U(){var e=Object(O.a)(["\n  border-bottom: 1px solid ",";\n"]);return U=function(){return e},e}function V(){var e=Object(O.a)(["\n  width: 100%;\n"]);return V=function(){return e},e}var W=Object(v.c)(j.a)(_.b),k=Object(v.c)(g.a)(_.b),B=Object(v.c)(h.a)(V()),K=Object(v.c)(T.a)(U(),(function(e){return e.theme.palette.grey[300]})),H=(Object(v.c)(N.a)(R()),Object(v.c)(D.a)(_.b)),z=Object(v.c)(I.a)(_.b),F=(Object(v.c)(C.a)(L(),(function(e){return e.rgbcolor}),(function(e){return e.theme.palette.common.white}),(function(e){return e.theme.spacing(4)})),Object(v.c)(A.a)(x(),(function(e){return e.theme.spacing(2)})),Object(v.c)(S.a)(P())),M=Object(v.c)(f.a)(w()),J=v.c.h2(y()),G=a(628),X=a(629),q=a(630),Q=a(631),Y=a(632),Z=a(633),$=a(634),ee=a(635),te=a(636),ae=function(e){var t=Object(i.useContext)(o.a).state,a=Object(i.useState)(!1),c=Object(n.a)(a,2),l=c[0],d=c[1],s=e.projectId;return console.log(t.divisions),r.a.createElement(B,{mb:6},r.a.createElement(F,null,r.a.createElement(G.a,null,r.a.createElement(X.a,null,r.a.createElement(q.a,null,r.a.createElement(Q.a,null,"Id"),r.a.createElement(Q.a,null,"Name"),r.a.createElement(Q.a,null,"Description"),r.a.createElement(Q.a,null),r.a.createElement(Q.a,null),r.a.createElement(Q.a,null))),r.a.createElement(Y.a,null,t.divisions.map((function(e){return r.a.createElement(q.a,{key:e.id},r.a.createElement(Q.a,{component:"th",scope:"row"},e.id),r.a.createElement(Q.a,{component:"th",scope:"row"},r.a.createElement("b",null,e.name)),r.a.createElement(Q.a,null,e.description),r.a.createElement(Q.a,null,r.a.createElement(W,{href:"/web/admin/projects/".concat(s,"/divisions/").concat(e.id,"/forms"),variant:"contained",color:"primary",size:"medium",target:"_self"},"Details")),r.a.createElement(Q.a,null,r.a.createElement(W,{href:"/web/admin/projects/".concat(s,"/divisions/edit/").concat(e.id),variant:"contained",color:"secondary",size:"medium",target:"_self"},"Edit")),r.a.createElement(Q.a,null,r.a.createElement(W,{onClick:function(){return d(!0)},variant:"contained",color:"secondary",size:"medium",target:"_self"},"Remove")))})))),r.a.createElement(Z.a,{open:l,onClose:function(){return d(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement($.a,null,r.a.createElement(ee.a,{id:"alert-dialog-description"},"Are you confirm to remove this division?")),r.a.createElement(te.a,null,r.a.createElement(W,{onClick:function(){return d(!1)},color:"secondary"},"Cancel"),r.a.createElement(W,{variant:"contained",onClick:function(){return d(!1)},color:"primary",autoFocus:!0},"Confirm")))))},ne=r.a.forwardRef((function(e,t){return r.a.createElement(u.c,Object.assign({innerRef:t},e))})),ie=function(e){var t=Object(i.useContext)(o.a),a=t.state,n=e.pageType,c=n.split("/")[4]?n.split("/")[4]:null;return Object(i.useEffect)((function(){Object(b.e)(c).then((function(e){if(e.data.data){var a=e.data.data[0].name;t.dispatch({type:"INITIAL_PROJECT_NAME",projectName:a})}})).catch((function(e){})),Object(b.a)(c).then((function(e){if(e.data.data){var a=e.data.data;t.dispatch({type:"INITIAL_DIVISIONS",divisions_data:a})}})).catch((function(e){}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{title:"Divisions"}),r.a.createElement(z,{variant:"h3",gutterBottom:!0},"Divisions"),r.a.createElement(k,{"aria-label":"Breadcrumb",mt:2},r.a.createElement(E.a,{component:ne,to:"/web/admin/projects"},"Admin"),r.a.createElement(E.a,{component:ne,to:"/web/admin/projects"},"Projects"),r.a.createElement(z,null,a.projectName)),r.a.createElement(H,{my:6}),r.a.createElement(f.a,{container:!0,item:!0,lg:12,alignItems:"center"},r.a.createElement(f.a,{container:!0,item:!0,lg:6,md:6},r.a.createElement(J,null,a.projectName)),r.a.createElement(M,{container:!0,item:!0,lg:6,md:6,spacing:2,justify:"flex-end"},r.a.createElement(W,{href:"/web/admin/projects/".concat(c,"/divisions/add"),variant:"contained",color:"primary",size:"large",target:"_self"},"Add New Division"))),a.divisions.length>0&&r.a.createElement(ae,{projectId:c}),0===a.divisions.length&&r.a.createElement("h2",null,"No Record!"))},re=a(639),ce=function(e){var t=e.pageType,a=(e.editItem,Object(i.useContext)(o.a)),n=a.state,c=function(e,t){a.dispatch({type:"CHANGE_UPDATE_TEXTFIELD",fieldValue:e,fieldName:t})};return r.a.createElement(B,null,r.a.createElement(K,null,r.a.createElement(F,null,r.a.createElement("form",{noValidate:!0,autoComplete:"off"},r.a.createElement(f.a,{container:!0,item:!0,lg:12},r.a.createElement(f.a,{container:!0,item:!0,lg:6,md:4},(t.includes("edit"),r.a.createElement(re.a,{id:"name",label:"Name",style:{margin:8},value:n.updateDivision.name?n.updateDivision.name:"",defaultValue:n.updateDivision.name,onChange:function(e){return c(e.target.value,"name")},InputLabelProps:{shrink:!0},fullWidth:!0,m:5}))),r.a.createElement(f.a,{container:!0,item:!0,lg:6,md:8},r.a.createElement(re.a,{id:"description",label:"Description",style:{margin:8},value:n.updateDivision.title?n.updateDivision.title:"",defaultValue:n.updateDivision.title,onChange:function(e){return c(e.target.value,"title")},InputLabelProps:{shrink:!0},type:"text",fullWidth:!0,m:5})),r.a.createElement(f.a,{container:!0,item:!0,lg:12,md:12},r.a.createElement(re.a,{id:"description",label:"Description",style:{margin:8},value:n.updateDivision.description?n.updateDivision.description:"",defaultValue:n.updateDivision.description,onChange:function(e){return c(e.target.value,"description")},InputLabelProps:{shrink:!0},type:"text",fullWidth:!0,m:5}))),r.a.createElement(f.a,{container:!0,item:!0,lg:12,justify:"flex-end"},r.a.createElement(j.a,{variant:"contained",size:"medium",style:{margin:"25px 8px 0 8px"}},"Reset"),r.a.createElement(j.a,{variant:"contained",color:"primary",size:"medium",style:{margin:"25px 8px 0 8px"},target:"_self"},"Save"))))))},oe=r.a.forwardRef((function(e,t){return r.a.createElement(u.c,Object.assign({innerRef:t},e))})),le=function(e){var t=e.pageType,a=e.editId,n=Object(i.useContext)(o.a),c=n.state,l=t.split("/")[4]?t.split("/")[4]:null,d=t.split("/")[7]?t.split("/")[7]:null;return console.log(d),Object(i.useEffect)((function(){Object(b.e)(l).then((function(e){if(e.data.data){var t=e.data.data[0].name;console.log(t),n.dispatch({type:"INITIAL_PROJECT_NAME",projectName:t})}})),t.includes("edit")&&Object(b.d)(d).then((function(e){if(console.log(e),e.data.data){var t=e.data.data;n.dispatch({type:"INITIAL_UPDATE_DIVISION",division_data:t})}})).catch((function(e){}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{title:"Divisions"}),r.a.createElement(z,{variant:"h3",gutterBottom:!0},"Divisions"),r.a.createElement(k,{"aria-label":"Breadcrumb",mt:2},r.a.createElement(E.a,{component:oe,exact:!0,to:"/web/admin/projects"},"Admin"),r.a.createElement(E.a,{component:oe,exact:!0,to:"/web/admin/projects"},"Projects"),r.a.createElement(E.a,{component:oe,exact:!0,to:"/web/admin/projects/".concat(l,"/divisions")},c.projectName),t.includes("add")?r.a.createElement(z,null,"Add New Division"):t.includes("edit")?r.a.createElement(z,null,"Edit Division"):null),r.a.createElement(H,{my:6}),r.a.createElement(f.a,{container:!0,item:!0,lg:12,md:12},r.a.createElement(M,{container:!0,item:!0,lg:6,md:6},t.includes("add")?r.a.createElement("h2",null,"Add New Division"):r.a.createElement("h2",null,"Edit Division : ",c.updateDivision.name)),r.a.createElement(f.a,{container:!0,item:!0,lg:6,md:6,justify:"flex-end"},r.a.createElement(W,{href:"/web/admin/projects/".concat(l,"/divisions"),color:"primary",size:"medium",target:"_self"},"Back"))),r.a.createElement(f.a,{container:!0,item:!0,lg:12,md:12},r.a.createElement(ce,{pageType:t,editId:a})))};t.default=function(e){var t=Object(c.f)().pathname,a=Object(i.useReducer)(s,{projectName:"",divisions:[],updateDivision:{}}),l=Object(n.a)(a,2),d=l[0],u=l[1];return r.a.createElement(o.a.Provider,{value:{state:d,dispatch:u}},t.includes("add")||t.includes("edit")?r.a.createElement(le,{pageType:t}):r.a.createElement(ie,{pageType:t}))}}}]);
//# sourceMappingURL=8.b1f881e9.chunk.js.map